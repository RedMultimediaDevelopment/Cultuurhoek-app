"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
// used in tests to allow us to check test output
async function pollForLoggerData(stream) {
    let elapsedTime = 0;
    let value = null;
    const incrementInMs = 50;
    const maxTime = 1000;
    while (!value && elapsedTime < maxTime) {
        await new Promise(function (resolve, reject) {
            setTimeout(function () {
                resolve({});
            }, incrementInMs);
        });
        const currentVal = stream.getContentsAsString('utf-8');
        if (currentVal) {
            value = currentVal
                .split('\n')
                .filter((line) => !!line)
                .map((line) => JSON.parse(line));
        }
        elapsedTime += incrementInMs;
    }
    return value || [];
}
exports.default = pollForLoggerData;
//# sourceMappingURL=poll-logger.js.map