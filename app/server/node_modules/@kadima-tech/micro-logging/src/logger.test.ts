import { WritableStreamBuffer } from 'stream-buffers';

import { createLogger } from './logger';
import pollLogger from './poll-logger';

describe('logger functionality', () => {
  it('logs when called', async () => {
    const stream = new WritableStreamBuffer();
    const logger = createLogger({ level: 'info' }, stream);
    logger.info('hello world');

    const output = await pollLogger(stream);

    expect(output?.[0].severity).toEqual('INFO');
    expect(output?.[0].message).toEqual('hello world');
  });
});
